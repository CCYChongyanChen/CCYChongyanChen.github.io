
<!DOCTYPE html>
<html>
    <head>
    
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    <title>VizWiz-Visual Grounding</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="static/css/style.css">
    
    <!-- jQuery library -->
    <script src="static/js/jquery.min.js"></script>
    <!-- <script src="static/js/jquery.js"></script>  -->
    <script type="text/javascript" src="static/QA_annotations/test.json"></script>
    <!-- Latest compiled JavaScript -->
    <script src="static/js/bootstrap.min.js"></script>
    <script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'></script>
    </head>
    <body>
        
        
        <!-- <p id="demo">Click the button to change the text in this paragraph.</p> -->
        <div class="container">







                    <!---------- header area ------------>
                    <div class="row">
                            <div class="col-lg-12">
                                <!--h3 style="text-align: center"><?=$title?></h3-->
                                <br/>
                                <!-- Button open collapse -->
                                <button type="button" id="showDtl"
                                        data-toggle="collapse" data-target="#dtlPane"
                                        class="btn btn-default btn-sm center-block" >
                                    Hide / Show Details
                                </button>
                
                                <!-- task details -->
                                <div class="collapse in" id="dtlPane">
                                    <div class="alert alert-warning motivation">

                                            <br><h2>Motivation:</h2> 
                                            <p>
                                            We aim to build a smart system that can automatically answer visual questions from blind people. The images and questions you will see are from visually impaired people and the answer are from crowd workers.
                                            </p>
                                             <!-- To improve the performance of our artificial intelligence algorithm, we need your help to visually around each answer. This helps the model learn which region of the image it should pay attention in order to get the answer. -->
                                            <br>
                                            <h2>We ask you to: </h2>
                                                Carefully review the question, image, and the answer provided, and then finish step 1, step2, and step 3 (if provided).
                                                <br><strong>Step 1:</strong> indicate if there is more than one question
                                                <br><strong>Step 2:</strong> indicate if the answer is referring to more than one region/object.
                                                 Draw ONE closed polygon to ground region that the answer is referring to by clicking the image. Click the first point again to finish one drawing.
                                                <br><strong>Step 3:</strong> Step 3 will only be activated if you select two "No" for Step 1 and 2. finishing step 1 and step 2. 
                                                For step 3, draw ONE closed polygon to ground region that the answer is referring to by clicking the image. Click the first point again to finish one drawing.
                                                You can use keyboard shortcut: Ctrl+Z to Undo, Enter to finish.  
                                           
                                               
                                                Or You may select "cannot draw" option and indicate the reason why you cannot ground the answer for this image. 
       
                                            <br>
                                          
                                            <details>
                                                <summary><strong>Click to see step 3's general examples </strong></summary>
                                                <ol>
                                                    <img src="static/images/howgood1.png" style="max-width: 100%; max-height: 100%;">
                                                    <img src="static/images/howgood2.png" style="max-width: 100%; max-height: 100%;">
                                                </ol>
                                            </details>
                
                                            <details>
                                                    <summary><strong>Click to see step 3's difficult examples </strong></summary>

                                                    <ol>
                                                            <br>
                                                            Please view the 5 tabs to see the 5 difficult examples.
                                                            <ul class="nav nav-tabs Examplenav-tabs">
                                                                    <li class="active"><a data-toggle="tab" href="#e1">Image with hole</a></li>
                                                                    <li><a data-toggle="tab" href="#e2">Text related</a></li>
                                                                    <li><a data-toggle="tab" href="#e3">Whole Image</a></li>
                                                                    <li><a data-toggle="tab" href="#e4">Complex Boundary</a></li>
                                                                    <li><a data-toggle="tab" href="#e5">Occulusion</a></li>
                                                                  </ul>
                                                                  
                                                                  <div class="tab-content examples">
                                                                    <div id="e1" class="tab-pane fade in active">
                                                                      <h3>Image with hole</h3> 
                                                                       If the object has a hole, you just need to draw the outside boundary
                                                                      <br>
                                                                      <img src="static/images/imagewithhole.png" style="max-width: 100%; max-height: 100%;">
                                                                      <button type="button" class="btn ExamplebtnNext" >Next</button>
                                                                    </div>
                                                                    <div id="e2" class="tab-pane fade">
                                                                      <h3>Text related</h3>
                                                                       when the answer is related to text, please pay more attention to the question to identify if the object is mentioned in the question. 
                                                                      If the object is not mentioned in the question, they may ask “what is this?”. In this case, answer may use text to describe the object and you should ground the object. See the example on the left. 
                                                                      If the object is mentioned in the question, see the example on the middle and right, you should ground the specific text. 
                                                                      <br>
                                                                      <img src="static/images/text.png" style="max-width: 100%; max-height: 100%;">
                                                                      <button type="button" class="btn ExamplebtnPrevious" >Previous</button>
                                                                      <button type="button" class="btn ExamplebtnNext" >Next</button>
                                                                    </div>
                                                                    <div id="e3" class="tab-pane fade">
                                                                      <h3>Whole Image</h3>
                                                                      Draw a rectangle to ground the whole picture as the target region if the answer is referring to the whole image. Usually, this happens when the camera is too close to the object.
                                                                      <br>
                                                                      <img src="static/images/wholeimage.png" style="max-width: 100%; max-height: 100%;">
                                                                      <button type="button" class="btn ExamplebtnPrevious" >Previous</button>
                                                                      <button type="button" class="btn ExamplebtnNext" >Next</button>
                                                                    </div>
                                                                    
                                                                    <div id="e4" class="tab-pane fade">
                                                                        <h3>Complex Boundary</h3>
                                                                        <p>  Please try you best to trace the boundary of the object as tightly as possible. Only when the boundary is too complex that you may not need to perfectly trace the boundary.
                                                                        </p> 
                                                                        <br>
                                                                        <img src="static/images/howgood1.png" style="max-width: 100%; max-height: 100%;"><br>
                                                                        <img src="static/images/howgood2.png" style="max-width: 100%; max-height: 100%;">
                                                                        <button type="button" class="btn ExamplebtnPrevious" >Previous</button>
                                                                        <button type="button" class="btn ExamplebtnNext">Next</button>
                                                                    </div>
                                                                    
                                                                    <div id="e5" class="tab-pane fade">
                                                                        <h3>Occulusion</h3>
                                                                        Please do not include the invisible part. 
                                                                        <br>
                                                                        <img src="static/images/invisiblepart1.png" style="max-width: 100%; max-height: 100%;"><br>
                                                                        <img src="static/images/invisiblepart2.png" style="max-width: 100%; max-height: 100%;">
                                                                        
                                                                        <button type="button" class="btn ExamplebtnPrevious" >Previous</button>
                                                                    </div>
                                                                    </div>














                                                        </ul>
                                                    </ol>

                                            </details>
                                            <br>
                                            <h3>PLEASE NOTE: </h3>      
                                            You will annotate for five image-question pairs in one HIT.
                                            <br> You cannot go to next page until you finish the current one.
                                            <br> Please do not refresh the webpage once you have started working, as you will lose all your progress, and have to start at the beginning.                 
                                            <br>It is possible that some images could be meaningless, inappropriate, or offensive. We cannot control what pictures are taken. Kindly use your best judgement for this task.

                                       
                
                
                                        <button id="hideDtl" type="button" class="btn btn-default btn-sm center-block">
                                            Hide
                                        </button>
                
                                        <small style="display: block; text-align: center; font-size: 13px; margin-top: 5px; font-style: italic">
                                            You can see this information anytime by clicking "Hide / Show Details" button above.
                                        </small>
                                    </div>
                
                                </div>
                
                            </div>
                        </div>





        </div>



        
        <!-- <div class="myDIV"><button class="glyphicon glyphicon-question-sign" aria-hidden="true"></button></div>
        <div class="hide">I am shown when someone hovers over the div above.</div> -->


        <!-- panel-heading -->
        <form name='mturk_form' method='post' id='mturk_form' action='https://www.mturk.com/mturk/externalSubmit'><input type='hidden' value='' name='assignmentId' id='assignmentId'/>
        
            <div class="container">
            <ul class="nav nav-tabs controlImg">
                    <li class="active"><a href="#tab1" id="TAB1" data-toggle="tab" onClick="find_activated_tab(this.id)">Image 1</a></li>
                    <li><a href="#tab2" data-toggle="tab" id="TAB2" onClick="find_activated_tab(this.id)">Image 2</a></li>
                    <li><a href="#tab3" data-toggle="tab" id="TAB3" onClick="find_activated_tab(this.id)">Image 3</a></li>
                    <li><a href="#tab4" data-toggle="tab" id="TAB4" onClick="find_activated_tab(this.id)">Image 4</a></li>
                    <li><a href="#tab5" data-toggle="tab" id="TAB5" onClick="find_activated_tab(this.id)">Image 5</a></li>
            </ul>


                
                    <!-------- main content ---------->
                    <div class="row">
                    
                        <!------- image column ------->
                        <div class="col-sm-6">

                            <!---------- Image ---------->
                            <div class="image_wrap" style="overflow: hidden">
                                
                                    <div class="viewer" >

                                    <h3 class="text-secondary" id="question"></h3>
                                    <h3 class="text-secondary" id="answer"></h3>

                                    <input type="hidden" id="task1forsubmit" name="task1forsubmit">

                                    <div id="canvaswrapper" style="position:relative;width:500px; height:500px;">
                                        <img class="coveredImage" id="image" src="" width="400" height="500" style="position: absolute; left: 0; top: 0; z-index: 0; user-select: none;">
                                        <canvas id="myCanvas" width="400" height="500" 
                                        style="position: absolute; left: 0; top: 0; z-index: 1; "></canvas>
                                    </div>
                                    <div class="btnsCenterContainer">
                                    <button type="button" class="btn btn-secondary" onclick="DeleteAllThenInit()">Clear</button>
                                    <button type="button" class="btn btn-secondary" onclick="UnDo()" data-toggle="tooltip"  data-placement="top" title="ctrl+z">UnDo</button>
                                    </div>
                                </div>


                            </div>
                        </div>

                        <!----------- all tasks column ----------->
                        <div class="col-sm-6">
                                    <!----------  Step: Visual Grounding ------------>
                                    <div class="col-lg-12">
                                        <h4 style="
                                            text-align: left;
                                            font-weight: bold;
                                            padding: 5px;
                                            margin: 0px 0px 15px;
                                        ">
                                        Please read the following question and answer about the image to the left and finish the 3 steps below 
                                        </h4>
                                    <!-- </div> -->

                                    </div><!----------  Step: Visual Grounding ------------>

                                    <!----------  Step: Text Detection ------------>
                                    <div class="row">
                                        <div class="col-lg-12 text_detect border-around" style="margin-top: 30px;">

                                            <table class="ansChoices table table-condensed"
                                                style="">
                                                <thead>
                                                <tr>
                                                    <th colspan="4" class="text-center" style="">
                                                        <h4 style="font-weight: bold; margin: 2px auto">
                                                            Step 1: Is there more than one question asked?
                                                        </h4>
                                                        
                                                        <a class="glyphicon glyphicon-question-sign" aria-hidden="true" data-toggle="tooltip"  data-placement="top" title="
                                                        For example, `what brand is this? what type of skin it is for?`"></a>

                                                    </th>
                                                </tr>
                                                </thead>

                                                <tbody>
                                                <tr>
                                                    <!-- Col 1 -->
                                                    <td style="width: 50%; padding-left: 0px">

                                                        <div class="radio ans_choice pull-right">
                                                            <label>
                                                                <input name="MULTI_QUESTION_DETECT" type="radio" value="Y">
                                                                <strong>YES:</strong>
                                                                More than one questions asked.
                                                            </label>
                                                        </div>
                                                    </td>

                                                    <!-- Col 2 -->
                                                    <td style="width: 50%; padding-right: 0px">

                                                        <div class="radio ans_choice pull-left">
                                                            <label>
                                                                <input name="MULTI_QUESTION_DETECT" type="radio" value="N" >
                                                                <strong>NO:</strong>
                                                                Just one question asked.
                                                            </label>
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>

                                        </div>

                                    </div><!----------  Step: Text Detection ------------>


                                    <!---------- Step: Multi-focus ---------->
                                    <div class="row">

                                        <div class="col-sm-12 quality_issues border-around" style="margin-top: 30px;">

                                            <table class="ansChoices table table-condensed" style="">
                                                <thead>
                                                <tr>
                                                    <th colspan="4" class="text-center" style="">
                                                        <h4 style="font-weight: bold; margin: 2px auto">
                                                            Step 2: Does the answer have multi-focus?
                                                        </h4>
                                                        <a class="glyphicon glyphicon-question-sign" aria-hidden="true" data-toggle="tooltip"  data-placement="top" title="
                                                        is the answer is referring to more than one object or region?"></a>
                                                        

                                                    </th>
                                                </tr>
                                                </thead>

            


                                                <tbody>
                                                    <tr>
                                                        <!-- Col 1 -->
                                                        <td style="width: 50%; padding-left: 0px">

                                                            <div class="radio ans_choice pull-right">
                                                                <label>
                                                                    <input name="MULTI_FOCUS_DETECT" type="radio" value="Y" >
                                                                    <strong>YES:</strong>
                                                                    The answer focus on multi-objects.
                                                                </label>
                                                            </div>
                                                        </td>

                                                        <!-- Col 2 -->
                                                        <td style="width: 50%; padding-right: 0px">

                                                            <div class="radio ans_choice pull-left">
                                                                <label>
                                                                    <input name="MULTI_FOCUS_DETECT" type="radio" value="N" >
                                                                    <strong>NO:</strong>
                                                                    It just refers to one object.
                                                                </label>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>



                                            </table>


                                        </div>
                                    </div> <!---------- Step: Multi-focus ---------->



                                    <!---------- Step: Draw polygon ---------->
                                    <div class="row">

                                        <div class="col-sm-12 step3 border-around" style="margin-top: 30px;">

                                            <table class="ansChoices table table-condensed" >
                                                <thead>
                                                <tr>
                                                    <th colspan="4" class="text-center" style="">
                                                        <h4 style="font-weight: bold; margin: 2px auto">
                                                            Step 3: Draw one closed polygon to ground region that each answer is referring to by clicking on the image.
                                                        </h4>
                                                        <!-- <a class="glyphicon glyphicon-question-sign" aria-hidden="true" data-toggle="tooltip"  data-placement="top" title="
                                                        for example, when the "></a> -->
                                                        

                                                    </th>
                                                </tr>
                                                </thead>
                                            </table>

                                            <p style="text-align: center; font-weight: bold;
                                            margin: 10px 0px; font-size: 18px;">
                                        OR
                                            </p>




                                                                            <div class="row">
                                                                                <div class="col-lg-12">

                                                                                    <div class="input-group ">
                                                                                        <span class="input-group-addon">
                                                                                            <div class="checkbox" style="margin-top: 0px; margin-bottom: 0px;">
                                                                                                <label style="margin-top: 0px; margin-bottom: 0px;">
                                                                                                    <input name="NODRAW" id="nodraw" type="checkbox" value="CANNOT_DRAW" class="Step3" >
                                                                                                    Cannot draw:
                                                                                                </label>
                                                                                            </div>
                                                                                        </span>
                                                                                        <input name="Q_ISSUE_OTH" type="text"
                                                                                            placeholder="Input your reason for not drawing for this image"
                                                                                            title="Input your reason for not drawing for this image"
                                                                                            class="form-control Step3">
                                                                                    </div>



                                                                                </div>
                                                                            </div>

                                        </div>
                                    </div> <!---------- Step: Draw polygon ---------->
                        </div>
                        <!--- end all tasks column --->


                        <p id ="xycoorcommonAnswer"></p>


                        


                    </div>
            <!-- end section 1-->


                <div class="tab-content">
                    <div class="tab-pane btndiv active" id="tab1">
                        <button type="button" class="btn btnNext" id = "btnNext1">Next</button>
                    </div>
                    <div class="tab-pane btndiv" id="tab2">
                        <button type="button" class="btn btnNext">Next</button>
                        <button type="button" class="btn btnPrevious" >Previous</button>
                    </div>
                    <div class="tab-pane btndiv" id="tab3">
                        <button type="button" class="btn btnNext" >Next</button>
                        <button type="button" class="btn btnPrevious" >Previous</button>
                    </div>
                    <div class="tab-pane btndiv" id="tab4">
                        <button type="button" class="btn btnNext" >Next</button>
                        <button type="button" class="btn btnPrevious" >Previous</button>
                    </div>
                    <div class="tab-pane btndiv" id="tab5">

                        <button type="button" class="btn waves-effect waves-light btnsubmit" data-toggle="modal" data-target="#centralModalLg">Submit</button>
                        
                        
                        <button type="button" class="btn btnPrevious" >Previous</button>
                    </div>
                </div>

            </div>
            
       <!-- Central Modal Large -->
       <div class="modal fade" id="centralModalLg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <!--Content-->
          <div class="modal-content">
            <!--Header-->
            <div class="modal-header">
              <h4 class="modal-title w-100" id="myModalLabel">Submit the HIT?</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <!--Body-->
            <div class="modal-body">
              
                <label style="margin-bottom: 5px">
                    Do you have any suggestions, feedback, or general comments for us?
                    <span class="text-muted">(optional)</span>
                </label>
        
                <textarea name="WORKER_COMMENTS" 
                style="font-size:18px" class="form-control  input-lg" rows="2"></textarea>
                
            </div>
            <!--Footer-->
            <div class="modal-footer">
                <button type="submit" class="btn" value="Submit">Yes</button>
              <button type="button" class="btn" data-dismiss="modal">Cancel</button>
            </div>
          </div>
          <!--/.Content-->
        </div>
      </div>
      <!-- Central Modal Large -->

        </form>
    
        <script src="static/js/initialize.js"></script>
        <script src="static/js/EnableDisable.js"></script>
        <script src="static/js/Image_related.js"></script>
        <script src="static/js/Whole_HTML.js"></script>
        <script src="static/js/Cookie.js"></script>


        
        <script language='Javascript'>turkSetAssignmentID();</script>
    </body>
</html>
